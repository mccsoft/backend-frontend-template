steps:
  - checkout: self
    fetchDepth: 1
    submodules: true

  - template: ../shared/cache-node-modules.yml

  - script: npx playwright install
    workingDirectory: e2e
    displayName: 'npx playwright install'

  - task: DownloadPipelineArtifact@2
    inputs:
      artifact: 'storybook'
      path: './frontend/storybook-static'

  - script: |
      RUN_STORYBOOK_SERVER=1 yarn workspace e2e test
    displayName: 'run storybook tests'
